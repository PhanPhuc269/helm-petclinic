apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: grafana
  namespace: argocd
spec:
  project: default
  source:
    repoURL: https://grafana.github.io/helm-charts
    chart: grafana
    targetRevision: 9.2.7
    helm:
      values: |
        ingress:
          enabled: true
          hosts:
            - grafana.phanphuc.id.vn
          ingressClassName: nginx
          path: /
          pathType: Prefix
        service:
          type: NodePort
          nodePort: 32000
        datasources:
          datasources.yaml:
            apiVersion: 1
            datasources:
              - name: Loki
                type: loki
                access: proxy
                url: http://loki.monitoring:3100
                isDefault: false
                editable: true
              - name: Prometheus
                type: prometheus
                access: proxy
                url: http://prometheus-server.monitoring:80
                isDefault: true
                editable: true
              - name: zipkin
                type: zipkin
                access: proxy
                url: http://zipkin.monitoring:9411
                isDefault: false
                editable: true
                uid: aepemvvhucw74f
                jsonData:
                  tracesToLogsV2:
                    customQuery: true
                    query: '{app=~".+"}  |= "${__trace.traceId}"'
                    spanEndTimeShift: 1h
                    spanStartTimeShift: -1h
                  tracesToMetrics:
                    queries:
                      - name: Metrics
                        query: http_server_requests_seconds_count
                    spanEndTimeShift: 1h
                    spanStartTimeShift: -1h
                    tags:
                      - key: app
                        value: app
        dashboardProviders:
          dashboardproviders.yaml:
            apiVersion: 1
            providers:
            - name: 'default'
              orgId: 1
              folder: ''
              type: file
              disableDeletion: false
              editable: true
              options:
                path: /var/lib/grafana/dashboards/default

        dashboards:
          default:
            petclinic-traffic-logs:
              json: |
                {
                  "title": "Petclinic Traffic & Logs",
                  "uid": "petclinic-traffic-logs",
                  "schemaVersion": 16,
                  "version": 1,
                  "panels": [
                    {
                      "type": "graph",
                      "title": "HTTP Request Count",
                      "datasource": "Prometheus",
                      "targets": [
                        {
                          "expr": "sum(http_server_requests_seconds_count)",
                          "legendFormat": "Tá»•ng request"
                        },
                        {
                          "expr": "sum(http_server_requests_seconds_count{status=~\"2..\"})",
                          "legendFormat": "Request 2xx"
                        },
                        {
                          "expr": "sum(http_server_requests_seconds_count{status=~\"5..\"})",
                          "legendFormat": "Request 5xx"
                        }
                      ],
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 0
                      }
                    },
                    {
                      "type": "logs",
                      "title": "Application Logs",
                      "datasource": "Loki",
                      "targets": [
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "code",
                          "expr": "{app=\"api-gateway\"} |= ``",
                          "queryType": "range",
                          "refId": "A"
                        },
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "builder",
                          "expr": "{app=\"admin-server\"} |= ``",
                          "hide": false,
                          "queryType": "range",
                          "refId": "B"
                        },
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "builder",
                          "expr": "{app=\"customers-service\"} |= ``",
                          "hide": false,
                          "queryType": "range",
                          "refId": "C"
                        },
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "builder",
                          "expr": "{app=\"vets-service\"} |= ``",
                          "hide": false,
                          "queryType": "range",
                          "refId": "D"
                        },
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "builder",
                          "expr": "{app=\"visits-service\"} |= ``",
                          "hide": false,
                          "queryType": "range",
                          "refId": "E"
                        },
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "editorMode": "builder",
                          "expr": "{app=\"discovery-server\"} |= ``",
                          "hide": false,
                          "queryType": "range",
                          "refId": "F"
                        }
                      ],
                      "gridPos": {
                        "h": 10,
                        "w": 24,
                        "x": 0,
                        "y": 8
                      }
                    }
                  ]
                }
            petclinic-dashboard:
              json: |
                {
                  "__requires": [
                    {
                      "type": "grafana",
                      "id": "grafana",
                      "name": "Grafana",
                      "version": "5.0.0"
                    },
                    {
                      "type": "panel",
                      "id": "graph",
                      "name": "Graph",
                      "version": "5.0.0"
                    },
                    {
                      "type": "datasource",
                      "id": "prometheus",
                      "name": "Prometheus",
                      "version": "5.0.0"
                    },
                    {
                      "type": "panel",
                      "id": "singlestat",
                      "name": "Singlestat",
                      "version": "5.0.0"
                    }
                  ],
                  "annotations": {
                    "list": [
                      {
                        "builtIn": 1,
                        "datasource": "-- Grafana --",
                        "enable": true,
                        "hide": true,
                        "iconColor": "rgba(0, 211, 255, 1)",
                        "name": "Annotations & Alerts",
                        "type": "dashboard"
                      }
                    ]
                  },
                  "editable": true,
                  "gnetId": null,
                  "graphTooltip": 0,
                  "id": null,
                  "iteration": 1539967676482,
                  "links": [],
                  "panels": [
                    {
                      "aliasColors": {},
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 9,
                        "w": 12,
                        "x": 0,
                        "y": 0
                      },
                      "id": 11,
                      "legend": {
                        "avg": false,
                        "current": true,
                        "max": false,
                        "min": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(rate(http_server_requests_seconds_sum{status!~\"5..\"}[1m]))/sum(rate(http_server_requests_seconds_count{ status!~\"5..\"}[1m]))",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "HTTP - AVG",
                          "refId": "A"
                        },
                        {
                          "expr": "max(http_server_requests_seconds_max{status!~\"5..\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "HTTP - MAX",
                          "refId": "B"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "HTTP Request Latency",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "decimals": null,
                          "format": "s",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": "0",
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    },
                    {
                      "aliasColors": {},
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 9,
                        "w": 12,
                        "x": 12,
                        "y": 0
                      },
                      "id": 9,
                      "legend": {
                        "avg": false,
                        "current": true,
                        "max": true,
                        "min": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 0.5,
                      "points": true,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(rate(http_server_requests_seconds_count[1m]))",
                          "format": "time_series",
                          "interval": "",
                          "intervalFactor": 1,
                          "legendFormat": "request - ok",
                          "refId": "A"
                        },
                        {
                          "expr": "sum(rate(http_server_requests_seconds_count{status=~\"5..\"}[1m]))",
                          "format": "time_series",
                          "interval": "",
                          "intervalFactor": 1,
                          "legendFormat": "request - err",
                          "refId": "B"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "HTTP Request Activity",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "format": "ops",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": "0",
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 0,
                        "y": 9
                      },
                      "id": 2,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"updateOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Owners Updated",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 6,
                        "y": 9
                      },
                      "id": 3,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"createOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Owners Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 12,
                        "y": 9
                      },
                      "id": 4,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_pet_seconds_count{method=\"processCreationForm\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Pets Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 18,
                        "y": 9
                      },
                      "id": 5,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "Value",
                      "targets": [
                        {
                          "expr": "sum(petclinic_visit_seconds_count{method=\"read\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Visit Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "aliasColors": {},
                      "bars": true,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 14
                      },
                      "id": 7,
                      "legend": {
                        "alignAsTable": false,
                        "avg": false,
                        "current": false,
                        "hideEmpty": false,
                        "hideZero": true,
                        "max": true,
                        "min": false,
                        "rightSide": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": false,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"createOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": false,
                          "intervalFactor": 1,
                          "legendFormat": "owner create",
                          "refId": "A"
                        },
                        {
                          "expr": "sum(petclinic_pet_seconds_count{method=\"processCreationForm\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "pet create",
                          "refId": "B"
                        },
                        {
                          "expr": "sum(petclinic_visit_seconds_count{method=\"create\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "visit create",
                          "refId": "C"
                        },
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"updateOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "owner update",
                          "refId": "D"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "SPC Business Histogram",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    }
                  ],
                  "refresh": "30s",
                  "schemaVersion": 16,
                  "style": "dark",
                  "tags": [],
                  "templating": {
                    "list": [
                      {
                        "auto": true,
                        "auto_count": 1,
                        "auto_min": "10s",
                        "current": {
                          "text": "auto",
                          "value": "$__auto_interval_timeRange"
                        },
                        "hide": 0,
                        "label": null,
                        "name": "timeRange",
                        "options": [
                          {
                            "selected": true,
                            "text": "auto",
                            "value": "$__auto_interval_timeRange"
                          },
                          {
                            "selected": false,
                            "text": "1m",
                            "value": "1m"
                          },
                          {
                            "selected": false,
                            "text": "10m",
                            "value": "10m"
                          },
                          {
                            "selected": false,
                            "text": "30m",
                            "value": "30m"
                          },
                          {
                            "selected": false,
                            "text": "1h",
                            "value": "1h"
                          },
                          {
                            "selected": false,
                            "text": "6h",
                            "value": "6h"
                          },
                          {
                            "selected": false,
                            "text": "12h",
                            "value": "12h"
                          },
                          {
                            "selected": false,
                            "text": "1d",
                            "value": "1d"
                          },
                          {
                            "selected": false,
                            "text": "7d",
                            "value": "7d"
                          },
                          {
                            "selected": false,
                            "text": "14d",
                            "value": "14d"
                          },
                          {
                            "selected": false,
                            "text": "30d",
                            "value": "30d"
                          }
                        ],
                        "query": "1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
                        "refresh": 2,
                        "type": "interval"
                      }
                    ]
                  },
                  "time": {
                    "from": "now-1h",
                    "to": "now"
                  },
                  "timepicker": {
                    "refresh_intervals": [
                      "5s",
                      "10s",
                      "30s",
                      "1m",
                      "5m",
                      "15m",
                      "30m",
                      "1h",
                      "2h",
                      "1d"
                    ],
                    "time_options": [
                      "5m",
                      "15m",
                      "1h",
                      "6h",
                      "12h",
                      "24h",
                      "2d",
                      "7d",
                      "30d"
                    ]
                  },
                  "timezone": "",
                  "title": "Spring Petclinic Metrics",
                  "uid": "69JXeR0iw",
                  "version": 1
                }
            trace-explorer-dashboard:
              json: |
                {
                  "annotations": {
                    "list": [
                      {
                        "builtIn": 1,
                        "datasource": {
                          "type": "grafana",
                          "uid": "-- Grafana --"
                        },
                        "enable": true,
                        "hide": true,
                        "iconColor": "rgba(0, 211, 255, 1)",
                        "name": "Annotations & Alerts",
                        "type": "dashboard"
                      }
                    ]
                  },
                  "editable": true,
                  "fiscalYearStartMonth": 0,
                  "graphTooltip": 1,
                  "id": 3,
                  "links": [],
                  "panels": [
                    {
                      "collapsed": false,
                      "gridPos": {
                        "h": 1,
                        "w": 24,
                        "x": 0,
                        "y": 0
                      },
                      "id": 12,
                      "panels": [],
                      "title": "Trace Information",
                      "type": "row"
                    },
                    {
                      "datasource": {
                        "type": "zipkin",
                        "uid": "zipkin"
                      },
                      "fieldConfig": {
                        "defaults": {},
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 1
                      },
                      "id": 2,
                      "options": {
                        "spanFilters": {
                          "criticalPathOnly": false,
                          "matchesOnly": false,
                          "serviceNameOperator": "=",
                          "spanNameOperator": "=",
                          "tags": [
                            {
                              "id": "ddf1ac8a-776",
                              "operator": "="
                            }
                          ]
                        }
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "zipkin",
                            "uid": "zipkin"
                          },
                          "query": "$trace_id",
                          "queryType": "traceID",
                          "refId": "A"
                        }
                      ],
                      "title": "Trace Timeline",
                      "type": "traces"
                    },
                    {
                      "collapsed": false,
                      "gridPos": {
                        "h": 1,
                        "w": 24,
                        "x": 0,
                        "y": 9
                      },
                      "id": 13,
                      "panels": [],
                      "title": "Metrics",
                      "type": "row"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "PBFA97CFB590B2093"
                      },
                      "description": "",
                      "fieldConfig": {
                        "defaults": {
                          "color": {
                            "mode": "thresholds"
                          },
                          "mappings": [],
                          "thresholds": {
                            "mode": "absolute",
                            "steps": [
                              {
                                "color": "green"
                              }
                            ]
                          }
                        },
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 10
                      },
                      "id": 14,
                      "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "percentChangeColorMode": "standard",
                        "reduceOptions": {
                          "calcs": [
                            "lastNotNull"
                          ],
                          "fields": "",
                          "values": false
                        },
                        "showPercentChange": false,
                        "textMode": "auto",
                        "wideLayout": true
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "prometheus"
                          },
                          "editorMode": "code",
                          "exemplar": true,
                          "expr": "http_server_requests_seconds_sum / http_server_requests_seconds_count # trace_id=\"$trace_id\"",
                          "format": "table",
                          "instant": true,
                          "legendFormat": "__auto",
                          "range": false,
                          "refId": "A"
                        }
                      ],
                      "title": "Metric Details for Trace: $trace_id",
                      "transformations": [
                        {
                          "id": "organize",
                          "options": {
                            "excludeByName": {
                              "Time": true,
                              "Value": false,
                              "__name__": false
                            },
                            "indexByName": {},
                            "renameByName": {}
                          }
                        }
                      ],
                      "type": "stat"
                    },
                    {
                      "collapsed": false,
                      "gridPos": {
                        "h": 1,
                        "w": 24,
                        "x": 0,
                        "y": 18
                      },
                      "id": 16,
                      "panels": [],
                      "title": "Logs",
                      "type": "row"
                    },
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "description": "Logs associated with the trace ID",
                      "fieldConfig": {
                        "defaults": {},
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 12,
                        "w": 24,
                        "x": 0,
                        "y": 19
                      },
                      "id": 9,
                      "options": {
                        "dedupStrategy": "none",
                        "enableInfiniteScrolling": false,
                        "enableLogDetails": true,
                        "prettifyLogMessage": false,
                        "showCommonLabels": false,
                        "showLabels": false,
                        "showTime": true,
                        "sortOrder": "Descending",
                        "wrapLogMessage": true
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "loki",
                            "uid": "P8E80F9AEF21F6940"
                          },
                          "direction": "backward",
                          "editorMode": "code",
                          "expr": "{app=~\".+\"}|=\"$trace_id\"",
                          "queryType": "range",
                          "refId": "A"
                        }
                      ],
                      "title": "All Logs for Trace: $trace_id",
                      "type": "logs"
                    }
                  ],
                  "preload": false,
                  "refresh": "",
                  "schemaVersion": 41,
                  "tags": [
                    "trace",
                    "observability",
                    "petclinic",
                    "zipkin"
                  ],
                  "templating": {
                    "list": [
                      {
                        "current": {
                          "text": "7a88cb63dd273f2d",
                          "value": "7a88cb63dd273f2d"
                        },
                        "description": "Enter a trace ID to view all related metrics and logs",
                        "label": "Trace ID",
                        "name": "trace_id",
                        "options": [
                          {
                            "selected": true,
                            "text": "7a88cb63dd273f2d",
                            "value": "7a88cb63dd273f2d"
                          }
                        ],
                        "query": "7a88cb63dd273f2d",
                        "type": "textbox"
                      }
                    ]
                  },
                  "time": {
                    "from": "now-15m",
                    "to": "now"
                  },
                  "timepicker": {},
                  "timezone": "",
                  "title": "Trace Explorer Dashboard",
                  "uid": "8d4b4a34-5472-407b-a35d-29f986945f43",
                  "version": 1
                }
            http-metrics-dashboard:
              json: |
                {
                  "annotations": {
                    "list": [
                      {
                        "builtIn": 1,
                        "datasource": {
                          "type": "datasource",
                          "uid": "grafana"
                        },
                        "enable": true,
                        "hide": true,
                        "iconColor": "rgba(0, 211, 255, 1)",
                        "name": "Annotations & Alerts",
                        "type": "dashboard"
                      }
                    ]
                  },
                  "editable": true,
                  "fiscalYearStartMonth": 0,
                  "graphTooltip": 0,
                  "id": 7,
                  "links": [],
                  "panels": [
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "PBFA97CFB590B2093"
                      },
                      "fieldConfig": {
                        "defaults": {
                          "color": {
                            "mode": "thresholds"
                          },
                          "mappings": [],
                          "thresholds": {
                            "mode": "absolute",
                            "steps": [
                              {
                                "color": "green"
                              }
                            ]
                          }
                        },
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 0
                      },
                      "id": 4,
                      "options": {
                        "colorMode": "value",
                        "graphMode": "area",
                        "justifyMode": "auto",
                        "orientation": "auto",
                        "percentChangeColorMode": "standard",
                        "reduceOptions": {
                          "calcs": [
                            "lastNotNull"
                          ],
                          "fields": "",
                          "values": false
                        },
                        "showPercentChange": false,
                        "text": {},
                        "textMode": "auto",
                        "wideLayout": true
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "editorMode": "code",
                          "expr": "sum(increase(http_server_requests_seconds_count[24h])) OR vector(0)",
                          "interval": "",
                          "legendFormat": "Total",
                          "range": true,
                          "refId": "A"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "editorMode": "code",
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"2..\"}[24h])) OR vector(0)",
                          "interval": "",
                          "legendFormat": "Success (2xx)",
                          "range": true,
                          "refId": "B"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "editorMode": "code",
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"5..\"}[24h])) OR vector(0)",
                          "interval": "",
                          "legendFormat": "Server Error (5xx)",
                          "range": true,
                          "refId": "C"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "editorMode": "code",
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"4..\"}[24h])) OR vector(0)",
                          "hide": false,
                          "instant": false,
                          "interval": "",
                          "legendFormat": "Client Error (4xx)",
                          "range": true,
                          "refId": "D"
                        }
                      ],
                      "title": "HTTP Requests (Last 24 Hour)",
                      "type": "stat"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "PBFA97CFB590B2093"
                      },
                      "fieldConfig": {
                        "defaults": {
                          "color": {
                            "mode": "palette-classic"
                          },
                          "custom": {
                            "axisBorderShow": false,
                            "axisCenteredZero": false,
                            "axisColorMode": "text",
                            "axisLabel": "Requests/s",
                            "axisPlacement": "auto",
                            "barAlignment": 0,
                            "barWidthFactor": 0.6,
                            "drawStyle": "line",
                            "fillOpacity": 10,
                            "gradientMode": "none",
                            "hideFrom": {
                              "legend": false,
                              "tooltip": false,
                              "viz": false
                            },
                            "insertNulls": false,
                            "lineInterpolation": "linear",
                            "lineWidth": 1,
                            "pointSize": 5,
                            "scaleDistribution": {
                              "type": "linear"
                            },
                            "showPoints": "never",
                            "spanNulls": false,
                            "stacking": {
                              "group": "A",
                              "mode": "none"
                            },
                            "thresholdsStyle": {
                              "mode": "off"
                            }
                          },
                          "mappings": [],
                          "min": 0,
                          "thresholds": {
                            "mode": "absolute",
                            "steps": [
                              {
                                "color": "green"
                              },
                              {
                                "color": "red",
                                "value": 80
                              }
                            ]
                          },
                          "unit": "short"
                        },
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 8
                      },
                      "id": 2,
                      "options": {
                        "dataLinks": [],
                        "legend": {
                          "calcs": [],
                          "displayMode": "list",
                          "placement": "bottom",
                          "showLegend": true
                        },
                        "tooltip": {
                          "hideZeros": false,
                          "mode": "multi",
                          "sort": "none"
                        }
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "editorMode": "code",
                          "expr": "sum(rate(http_server_requests_seconds_count[$__rate_interval]))",
                          "interval": "",
                          "legendFormat": "Total Requests",
                          "range": true,
                          "refId": "A"
                        }
                      ],
                      "title": "Total HTTP Requests",
                      "type": "timeseries"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "PBFA97CFB590B2093"
                      },
                      "description": "",
                      "fieldConfig": {
                        "defaults": {
                          "color": {
                            "mode": "palette-classic"
                          },
                          "custom": {
                            "hideFrom": {
                              "legend": false,
                              "tooltip": false,
                              "viz": false
                            }
                          },
                          "mappings": []
                        },
                        "overrides": []
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 12,
                        "x": 0,
                        "y": 16
                      },
                      "id": 6,
                      "options": {
                        "displayLabels": [
                          "percent"
                        ],
                        "legend": {
                          "displayMode": "list",
                          "placement": "right",
                          "showLegend": true,
                          "values": [
                            "percent"
                          ]
                        },
                        "pieType": "pie",
                        "reduceOptions": {
                          "calcs": [
                            "lastNotNull"
                          ],
                          "fields": "",
                          "values": false
                        },
                        "tooltip": {
                          "hideZeros": false,
                          "mode": "single",
                          "sort": "none"
                        }
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"2..\"}[24h])) OR vector(0)",
                          "instant": false,
                          "interval": "",
                          "legendFormat": "2xx (Success)",
                          "refId": "A"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"4..\"}[24h])) OR vector(0)",
                          "interval": "",
                          "legendFormat": "4xx (Client Error)",
                          "refId": "B"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "expr": "sum(increase(http_server_requests_seconds_count{status=~\"5..\"}[24h])) OR vector(0)",
                          "interval": "",
                          "legendFormat": "5xx (Server Error)",
                          "refId": "C"
                        }
                      ],
                      "title": "HTTP Status Distribution (24h)",
                      "type": "piechart"
                    },
                    {
                      "datasource": {
                        "type": "prometheus",
                        "uid": "PBFA97CFB590B2093"
                      },
                      "fieldConfig": {
                        "defaults": {
                          "color": {
                            "mode": "palette-classic"
                          },
                          "custom": {
                            "axisBorderShow": false,
                            "axisCenteredZero": false,
                            "axisColorMode": "text",
                            "axisLabel": "Requests/s",
                            "axisPlacement": "auto",
                            "barAlignment": 0,
                            "barWidthFactor": 0.6,
                            "drawStyle": "line",
                            "fillOpacity": 10,
                            "gradientMode": "none",
                            "hideFrom": {
                              "legend": false,
                              "tooltip": false,
                              "viz": false
                            },
                            "insertNulls": false,
                            "lineInterpolation": "linear",
                            "lineWidth": 1,
                            "pointSize": 5,
                            "scaleDistribution": {
                              "type": "linear"
                            },
                            "showPoints": "never",
                            "spanNulls": false,
                            "stacking": {
                              "group": "A",
                              "mode": "none"
                            },
                            "thresholdsStyle": {
                              "mode": "off"
                            }
                          },
                          "mappings": [],
                          "min": 0,
                          "thresholds": {
                            "mode": "absolute",
                            "steps": [
                              {
                                "color": "green"
                              },
                              {
                                "color": "red",
                                "value": 80
                              }
                            ]
                          },
                          "unit": "short"
                        },
                        "overrides": [
                          {
                            "matcher": {
                              "id": "byName",
                              "options": "2xx Responses"
                            },
                            "properties": [
                              {
                                "id": "color",
                                "value": {
                                  "fixedColor": "green",
                                  "mode": "fixed"
                                }
                              }
                            ]
                          },
                          {
                            "matcher": {
                              "id": "byName",
                              "options": "5xx Responses"
                            },
                            "properties": [
                              {
                                "id": "color",
                                "value": {
                                  "fixedColor": "red",
                                  "mode": "fixed"
                                }
                              }
                            ]
                          }
                        ]
                      },
                      "gridPos": {
                        "h": 8,
                        "w": 12,
                        "x": 12,
                        "y": 16
                      },
                      "id": 3,
                      "options": {
                        "dataLinks": [],
                        "legend": {
                          "calcs": [],
                          "displayMode": "list",
                          "placement": "bottom",
                          "showLegend": true
                        },
                        "tooltip": {
                          "hideZeros": false,
                          "mode": "multi",
                          "sort": "none"
                        }
                      },
                      "pluginVersion": "12.0.1",
                      "targets": [
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "expr": "sum(rate(http_server_requests_seconds_count{status=~\"2..\"}[$__rate_interval]))",
                          "interval": "",
                          "legendFormat": "2xx Responses",
                          "refId": "A"
                        },
                        {
                          "datasource": {
                            "type": "prometheus",
                            "uid": "PBFA97CFB590B2093"
                          },
                          "expr": "sum(rate(http_server_requests_seconds_count{status=~\"5..\"}[$__rate_interval]))",
                          "interval": "",
                          "legendFormat": "5xx Responses",
                          "refId": "B"
                        }
                      ],
                      "title": "HTTP Response Codes",
                      "type": "timeseries"
                    }
                  ],
                  "preload": false,
                  "refresh": "5s",
                  "schemaVersion": 41,
                  "tags": [
                    "http",
                    "spring"
                  ],
                  "templating": {
                    "list": [
                      {
                        "current": {
                          "text": "All",
                          "value": "$__all"
                        },
                        "datasource": "Prometheus",
                        "definition": "label_values(http_server_requests_seconds_count, application)",
                        "includeAll": true,
                        "label": "Application",
                        "name": "application",
                        "options": [],
                        "query": "label_values(http_server_requests_seconds_count, application)",
                        "refresh": 1,
                        "regex": "",
                        "type": "query"
                      }
                    ]
                  },
                  "time": {
                    "from": "now-1h",
                    "to": "now"
                  },
                  "timepicker": {},
                  "timezone": "",
                  "title": "HTTP Request Metrics",
                  "uid": "c8fec8b8-14d4-4d07-83aa-d4b856a78ef9",
                  "version": 1
                }
            grafana-petclinic-dashboard:
              json: |
                {
                  "__requires": [
                    {
                      "type": "grafana",
                      "id": "grafana",
                      "name": "Grafana",
                      "version": "5.0.0"
                    },
                    {
                      "type": "panel",
                      "id": "graph",
                      "name": "Graph",
                      "version": "5.0.0"
                    },
                    {
                      "type": "datasource",
                      "id": "prometheus",
                      "name": "Prometheus",
                      "version": "5.0.0"
                    },
                    {
                      "type": "panel",
                      "id": "singlestat",
                      "name": "Singlestat",
                      "version": "5.0.0"
                    }
                  ],
                  "annotations": {
                    "list": [
                      {
                        "builtIn": 1,
                        "datasource": "-- Grafana --",
                        "enable": true,
                        "hide": true,
                        "iconColor": "rgba(0, 211, 255, 1)",
                        "name": "Annotations & Alerts",
                        "type": "dashboard"
                      }
                    ]
                  },
                  "editable": true,
                  "gnetId": null,
                  "graphTooltip": 0,
                  "id": null,
                  "iteration": 1539967676482,
                  "links": [],
                  "panels": [
                    {
                      "aliasColors": {},
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 9,
                        "w": 12,
                        "x": 0,
                        "y": 0
                      },
                      "id": 11,
                      "legend": {
                        "avg": false,
                        "current": true,
                        "max": false,
                        "min": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(rate(http_server_requests_seconds_sum{status!~\"5..\"}[1m]))/sum(rate(http_server_requests_seconds_count{ status!~\"5..\"}[1m]))",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "HTTP - AVG",
                          "refId": "A"
                        },
                        {
                          "expr": "max(http_server_requests_seconds_max{status!~\"5..\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "HTTP - MAX",
                          "refId": "B"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "HTTP Request Latency",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "decimals": null,
                          "format": "s",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": "0",
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    },
                    {
                      "aliasColors": {},
                      "bars": false,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 9,
                        "w": 12,
                        "x": 12,
                        "y": 0
                      },
                      "id": 9,
                      "legend": {
                        "avg": false,
                        "current": true,
                        "max": true,
                        "min": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": true,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 0.5,
                      "points": true,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": false,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(rate(http_server_requests_seconds_count[1m]))",
                          "format": "time_series",
                          "interval": "",
                          "intervalFactor": 1,
                          "legendFormat": "request - ok",
                          "refId": "A"
                        },
                        {
                          "expr": "sum(rate(http_server_requests_seconds_count{status=~\"5..\"}[1m]))",
                          "format": "time_series",
                          "interval": "",
                          "intervalFactor": 1,
                          "legendFormat": "request - err",
                          "refId": "B"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "HTTP Request Activity",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "format": "ops",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": "0",
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 0,
                        "y": 9
                      },
                      "id": 2,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"updateOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Owners Updated",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 6,
                        "y": 9
                      },
                      "id": 3,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"createOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Owners Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 12,
                        "y": 9
                      },
                      "id": 4,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "",
                      "targets": [
                        {
                          "expr": "sum(petclinic_pet_seconds_count{method=\"processCreationForm\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Pets Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "cacheTimeout": null,
                      "colorBackground": false,
                      "colorValue": false,
                      "colors": [
                        "#299c46",
                        "rgba(237, 129, 40, 0.89)",
                        "#d44a3a"
                      ],
                      "datasource": "Prometheus",
                      "format": "none",
                      "gauge": {
                        "maxValue": 100,
                        "minValue": 0,
                        "show": false,
                        "thresholdLabels": false,
                        "thresholdMarkers": true
                      },
                      "gridPos": {
                        "h": 5,
                        "w": 6,
                        "x": 18,
                        "y": 9
                      },
                      "id": 5,
                      "interval": null,
                      "links": [],
                      "mappingType": 1,
                      "mappingTypes": [
                        {
                          "name": "value to text",
                          "value": 1
                        },
                        {
                          "name": "range to text",
                          "value": 2
                        }
                      ],
                      "maxDataPoints": 100,
                      "nullPointMode": "connected",
                      "nullText": null,
                      "postfix": "",
                      "postfixFontSize": "50%",
                      "prefix": "",
                      "prefixFontSize": "50%",
                      "rangeMaps": [
                        {
                          "from": "null",
                          "text": "N/A",
                          "to": "null"
                        }
                      ],
                      "sparkline": {
                        "fillColor": "rgba(31, 118, 189, 0.18)",
                        "full": false,
                        "lineColor": "rgb(31, 120, 193)",
                        "show": false
                      },
                      "tableColumn": "Value",
                      "targets": [
                        {
                          "expr": "sum(petclinic_visit_seconds_count{method=\"read\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": true,
                          "intervalFactor": 1,
                          "legendFormat": "",
                          "refId": "A"
                        }
                      ],
                      "thresholds": "",
                      "title": "Visit Created",
                      "type": "singlestat",
                      "valueFontSize": "80%",
                      "valueMaps": [
                        {
                          "op": "=",
                          "text": "N/A",
                          "value": "null"
                        }
                      ],
                      "valueName": "avg"
                    },
                    {
                      "aliasColors": {},
                      "bars": true,
                      "dashLength": 10,
                      "dashes": false,
                      "datasource": "Prometheus",
                      "fill": 1,
                      "gridPos": {
                        "h": 8,
                        "w": 24,
                        "x": 0,
                        "y": 14
                      },
                      "id": 7,
                      "legend": {
                        "alignAsTable": false,
                        "avg": false,
                        "current": false,
                        "hideEmpty": false,
                        "hideZero": true,
                        "max": true,
                        "min": false,
                        "rightSide": false,
                        "show": true,
                        "total": false,
                        "values": true
                      },
                      "lines": false,
                      "linewidth": 1,
                      "links": [],
                      "nullPointMode": "null",
                      "percentage": false,
                      "pointradius": 5,
                      "points": false,
                      "renderer": "flot",
                      "seriesOverrides": [],
                      "spaceLength": 10,
                      "stack": true,
                      "steppedLine": false,
                      "targets": [
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"createOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "instant": false,
                          "intervalFactor": 1,
                          "legendFormat": "owner create",
                          "refId": "A"
                        },
                        {
                          "expr": "sum(petclinic_pet_seconds_count{method=\"processCreationForm\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "pet create",
                          "refId": "B"
                        },
                        {
                          "expr": "sum(petclinic_visit_seconds_count{method=\"create\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "visit create",
                          "refId": "C"
                        },
                        {
                          "expr": "sum(petclinic_owner_seconds_count{method=\"updateOwner\", exception=\"none\"})",
                          "format": "time_series",
                          "intervalFactor": 1,
                          "legendFormat": "owner update",
                          "refId": "D"
                        }
                      ],
                      "thresholds": [],
                      "timeFrom": null,
                      "timeShift": null,
                      "title": "SPC Business Histogram",
                      "tooltip": {
                        "shared": true,
                        "sort": 0,
                        "value_type": "individual"
                      },
                      "type": "graph",
                      "xaxis": {
                        "buckets": null,
                        "mode": "time",
                        "name": null,
                        "show": true,
                        "values": []
                      },
                      "yaxes": [
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        },
                        {
                          "format": "short",
                          "label": null,
                          "logBase": 1,
                          "max": null,
                          "min": null,
                          "show": true
                        }
                      ]
                    }
                  ],
                  "refresh": "30s",
                  "schemaVersion": 16,
                  "style": "dark",
                  "tags": [],
                  "templating": {
                    "list": [
                      {
                        "auto": true,
                        "auto_count": 1,
                        "auto_min": "10s",
                        "current": {
                          "text": "auto",
                          "value": "$__auto_interval_timeRange"
                        },
                        "hide": 0,
                        "label": null,
                        "name": "timeRange",
                        "options": [
                          {
                            "selected": true,
                            "text": "auto",
                            "value": "$__auto_interval_timeRange"
                          },
                          {
                            "selected": false,
                            "text": "1m",
                            "value": "1m"
                          },
                          {
                            "selected": false,
                            "text": "10m",
                            "value": "10m"
                          },
                          {
                            "selected": false,
                            "text": "30m",
                            "value": "30m"
                          },
                          {
                            "selected": false,
                            "text": "1h",
                            "value": "1h"
                          },
                          {
                            "selected": false,
                            "text": "6h",
                            "value": "6h"
                          },
                          {
                            "selected": false,
                            "text": "12h",
                            "value": "12h"
                          },
                          {
                            "selected": false,
                            "text": "1d",
                            "value": "1d"
                          },
                          {
                            "selected": false,
                            "text": "7d",
                            "value": "7d"
                          },
                          {
                            "selected": false,
                            "text": "14d",
                            "value": "14d"
                          },
                          {
                            "selected": false,
                            "text": "30d",
                            "value": "30d"
                          }
                        ],
                        "query": "1m,10m,30m,1h,6h,12h,1d,7d,14d,30d",
                        "refresh": 2,
                        "type": "interval"
                      }
                    ]
                  },
                  "time": {
                    "from": "now-1h",
                    "to": "now"
                  },
                  "timepicker": {
                    "refresh_intervals": [
                      "5s",
                      "10s",
                      "30s",
                      "1m",
                      "5m",
                      "15m",
                      "30m",
                      "1h",
                      "2h",
                      "1d"
                    ],
                    "time_options": [
                      "5m",
                      "15m",
                      "1h",
                      "6h",
                      "12h",
                      "24h",
                      "2d",
                      "7d",
                      "30d"
                    ]
                  },
                  "timezone": "",
                  "title": "Spring Petclinic Metrics",
                  "uid": "69JXeR0iw",
                  "version": 1
                }
  destination:
    server: https://kubernetes.default.svc
    namespace: monitoring
  syncPolicy:
    automated:
      prune: true
      selfHeal: true
    syncOptions:
      - CreateNamespace=true